webpackJsonp([11],{"7ZSe":function(e,t,n){(e.exports=n("FZ+f")(!1)).push([e.i,"\n.title {\n  margin: 20px 0;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n}\n.title h3 {\n    margin-right: 20px;\n}\n.content {\n  margin-top: 40px;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n}\n.content .ct {\n    -webkit-box-flex: 0;\n        -ms-flex: 0 0 400px;\n            flex: 0 0 400px;\n}\n.content .tips {\n    -webkit-box-flex: 1;\n        -ms-flex: 1;\n            flex: 1;\n}\n",""])},kki9:function(e,t,n){var i=n("7ZSe");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n("rjj0")("2f011b3e",i,!0)},xKBo:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("QiB2"),a=n("0xDb"),l=n("M9A7"),r={components:{Pageing:i.a},data:function(){return{formInline:{time:"",checkconsultant:"",consultant:[]},keyword:!1,page:{},list:[],lists:[],chartData:{columns:["项目","总出货量"],rows:[]}}},mounted:function(){var e=this;Object(l.a)("common/getoptypelist").then(function(t){e.formInline.consultant=t.data.list})},methods:{checkdate:function(e){return Object(a.a)(e).split(" ")[0]},removetag:function(e){this.keyword&&(this.getinfo(),this.getlist({op_type:this.formInline.checkconsultant.join(","),begin_time:this.formInline.time?this.formInline.time[0]/1e3:"",end_time:this.formInline.time?this.formInline.time[1]/1e3:""}))},donwload:function(){var e=this.formInline;this.HttpDownload("/api/stat/shipmentlist?page="+this.page.curpage+"&export=1&op_type="+e.checkconsultant.join(",")+"&begin_time="+(e.time?e.time[0]/1e3:"")+"&end_time="+(e.time?e.time[1]/1e3:""),"出货量订单列表.xls")},getSummaries:function(){var e=param,t=e.columns,n=e.data,i=[];return t.forEach(function(e,t){if(0!==t){var a=n.map(function(t){return Number(t[e.property])});a.every(function(e){return isNaN(e)})||(i[t]=a.reduce(function(e,t){var n=Number(t);return isNaN(n)?e:e+t},0))}else i[t]="总进厂量"}),i},pagechange:function(e){this.getlist({op_type:this.formInline.checkconsultant.join(","),begin_time:this.formInline.time?this.formInline.time[0]/1e3:"",end_time:this.formInline.time?this.formInline.time[1]/1e3:"",page:e})},getinfo:function(){var e=this;Object(l.a)("stat/shipment",{op_type:this.formInline.checkconsultant.join(","),begin_time:this.formInline.time?this.formInline.time[0]/1e3:"",end_time:this.formInline.time?this.formInline.time[1]/1e3:""}).then(function(t){e.keyword=!0;var n=t.data.counts,i=[];for(var a in n)i.push({"项目":n[a].type,"总出货量":n[a].num});e.chartData.rows=i,e.lists=t.data.counts})},checkdetail:function(e){var t=this.$router.resolve({name:"orrdersgoodsdetails",query:{id:e.row.order_id}});window.open(t.href,"_blank")},onSubmit:function(e){""!=this.formInline.time?(this.getinfo(),this.getlist({op_type:this.formInline.checkconsultant.join(","),begin_time:this.formInline.time?this.formInline.time[0]/1e3:"",end_time:this.formInline.time?this.formInline.time[1]/1e3:""})):this.$message({showClose:!0,message:"请先填写查询时间",type:"warning"})},getlist:function(e){var t=this;Object(l.a)("stat/shipmentlist",e).then(function(e){t.list=e.data.list;var n=e.data.page;for(var i in n)n[i]=parseInt(n[i]);t.page=n,t.$message({showClose:!0,message:"数据已更新",type:"success"})})}}},o={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"zone-content"},[n("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[n("el-form-item",{staticClass:"otherinput"},[n("el-select",{attrs:{size:"mini",clearable:"",filterable:"",multiple:"",placeholder:"选择类型"},on:{"remove-tag":e.removetag},model:{value:e.formInline.checkconsultant,callback:function(t){e.$set(e.formInline,"checkconsultant",t)},expression:"formInline.checkconsultant"}},e._l(e.formInline.consultant,function(e,t){return n("el-option",{key:t,staticStyle:{width:"200px"},attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),e.formInline.time||""==e.formInline.time||null==e.formInline.time?n("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!e.formInline.hidetime,expression:"!formInline.hidetime"}]},[n("el-date-picker",{attrs:{size:"mini",type:"daterange","range-separator":"至","start-placeholder":"开始日期","default-time":["00:00:00","23:59:59"],"value-format":"timestamp","end-placeholder":"结束日期"},model:{value:e.formInline.time,callback:function(t){e.$set(e.formInline,"time",t)},expression:"formInline.time"}})],1):e._e(),e._v(" "),n("el-form-item",[n("el-button",{staticStyle:{transform:"translateY(-1px)"},attrs:{size:"mini",type:"primary"},on:{click:e.onSubmit}},[e._v("搜索")])],1)],1),e._v(" "),e.keyword&&e.formInline.time?n("div",[n("div",{staticClass:"title"},[n("h3",[e._v("出货量统计图")]),e._v(" "),n("el-button",{staticStyle:{transform:"translateY(-1px)"},attrs:{size:"mini",type:"primary"},on:{click:e.donwload}},[e._v("下载数据")])],1),e._v(" "),n("div",[e._v("查询时间:"+e._s(e.formInline.time?e.checkdate(e.formInline.time[0]/1e3):e.checkdate(e.formInline.time[1]/1e3)))]),e._v(" "),n("div",{staticClass:"content"},[n("div",{staticClass:"ct"},[n("ve-pie",{attrs:{data:e.chartData}})],1),e._v(" "),n("div",{staticClass:"tips",staticStyle:{"margin-left":"100px"}},[n("div",[n("el-table",{staticStyle:{width:"200px"},attrs:{data:e.lists,align:"center",border:""}},[n("el-table-column",{attrs:{prop:"type",label:"项目",align:"center","header-align":"center",width:"100"}}),e._v(" "),n("el-table-column",{attrs:{prop:"num",label:"总出货量",align:"center","header-align":"center"}})],1)],1)])]),e._v(" "),e._m(0),e._v(" "),n("el-table",{staticStyle:{width:"600px"},attrs:{data:e.list,border:"",align:"center"}},[n("el-table-column",{attrs:{prop:"order_sn",label:"单号",align:"center","header-align":"center"}}),e._v(" "),n("el-table-column",{attrs:{prop:"amount",label:"出货数量",align:"center",width:"80","header-align":"center"}}),e._v(" "),n("el-table-column",{attrs:{label:"出货时间",prop:"out_time",align:"center","header-align":"center"}}),e._v(" "),n("el-table-column",{attrs:{prop:"num",label:"操作",align:"center","header-align":"center",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(n){e.checkdetail(t)}}},[e._v("查看详情")])]}}])})],1),e._v(" "),n("pageing",{directives:[{name:"show",rawName:"v-show",value:e.page.totalnum,expression:"page.totalnum"}],attrs:{pageing:e.page},on:{pagechange:e.pagechange}})],1):e._e()],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"title"},[t("h3",[this._v("订单列表")])])}]};var s=n("VU/8")(r,o,!1,function(e){n("kki9")},null,null);t.default=s.exports}});