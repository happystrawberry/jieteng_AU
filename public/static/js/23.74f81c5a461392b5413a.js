webpackJsonp([23],{"4eIM":function(e,t,i){(e.exports=i("FZ+f")(!1)).push([e.i,"\n.el-tag + .el-tag[data-v-12e64a22] {\n  margin-left: 10px;\n}\n.button-new-tag[data-v-12e64a22] {\n  margin-left: 10px;\n  height: 32px;\n  line-height: 30px;\n  padding-top: 0;\n  padding-bottom: 0;\n}\n.input-new-tag[data-v-12e64a22] {\n  width: 90px;\n  margin-left: 10px;\n  vertical-align: bottom;\n}\n",""])},FQm8:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("NJ2I"),n=i("0xDb"),s=i("QiB2"),l=i("M9A7"),o={name:"mengt",components:{Pageing:s.a,Comheader:a.a},methods:{checktime:function(e){return Object(n.a)(e)},onadd:function(){console.log(123123)},checksure:function(e){var t=this;e.visible=!1,Object(l.a)("service/switchquestion",{id:e.id}).then(function(i){var a=t.list.findIndex(function(t){return t.id==e.id});t.list[a].enable=i.data.enable,t.$notify({title:"成功",message:(1==i.data.enable?"开启":"关闭")+"编号为"+i.data.id+"的问题成功",type:"success"})})},create:function(){this.dialog.showkey=!0},handleClose:function(e){this.dynamicTags.splice(this.dynamicTags.indexOf(e),1)},closed:function(){this.dynamicTags=[],this.dialog.checkList=[]},showInput:function(){var e=this;this.inputVisible=!0,this.$nextTick(function(t){e.$refs.saveTagInput.$refs.input.focus()})},handleInputConfirm:function(){var e=this.inputValue;e&&this.dynamicTags.push(e),this.inputVisible=!1,this.inputValue=""},search:function(e){this.getlist({query:e.servicequery,page:1})},sureckeck:function(){var e=this;if(0!=this.dialog.text.length)if(0!=this.dynamicTags.length){var t=[];for(var i in this.dynamicTags)this.dialog.checkList.indexOf(this.dynamicTags[i]>-1)?t.push(1):t.push(0);this.dialog.showkey=!1,Object(l.a)("service/savequestion",{id:0,question:this.dialog.text,options:this.dynamicTags,cause:t}).then(function(t){e.dialog.text="",e.dynamicTags=[],e.getlist()})}else this.$message({message:"是不是忘记写答案了",type:"warning"});else this.$message({message:"请填写问题题目",type:"warning"})},beforeclose:function(){this.dialog.sure="",this.dialog.checkList=[],this.dynamicTags=[],this.dialog.result=[],this.dialog.text=""},details:function(e){this.$router.push({name:"servicemanagedetails",query:{id:e}})},pagechange:function(e){this.getlist({query:e.servicequery,page:e})},getlist:function(e){var t=this;Object(l.a)("service/questionlist",e).then(function(e){var i=e.data.list;for(var a in e.data.list)i[a].plan_date=Object(n.a)(i[a].dateline),i.visible=!1;t.list=e.data.list,t.nodata=0==e.data.list.length;var s=e.data.page;for(var l in s)s[l]=parseInt(s[l]);t.page=s}),this.$message({message:"数据已更新",type:"success"})}},mounted:function(){this.getlist()},data:function(){return{formInline:{servicequery:"",hidetime:!0},dynamicTags:[],inputVisible:!1,inputValue:"",temprule:{text:[{required:!0,message:"请输入问题题目",trigger:"blur"}]},dialog:{showkey:!1,sure:"",checkList:[],result:[],text:""},nodata:!1,list:[],page:{}}}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"servicement zone-content"},[a("comheader",{attrs:{formInline:e.formInline},on:{search:e.search,create:e.create}}),e._v(" "),e.nodata?a("div",{staticClass:"nodata"},[a("img",{staticStyle:{display:"block",margin:"240px auto 20px"},attrs:{src:i("5c/t"),alt:""}}),e._v(" "),a("p",[e._v("暂时还没有数据哟")])]):a("el-table",{ref:"multipleTable",staticClass:"printprimary",staticStyle:{width:"1272px"},attrs:{type:"index",stripe:!0,data:e.list,border:"","tooltip-effect":"dark"}},[a("el-table-column",{attrs:{label:"编号",prop:"id",align:"center","header-align":"center",width:"130"}}),e._v(" "),a("el-table-column",{attrs:{label:"问题",prop:"question",align:"center","header-align":"center",width:"500"}}),e._v(" "),a("el-table-column",{attrs:{label:"新建时间",prop:"plan_date",align:"center","header-align":"center",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{label:"基础样本/份",prop:"nums",align:"center","header-align":"center",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",prop:"order_sn",align:"center","header-align":"center",width:"240"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{staticStyle:{"margin-left":"20px"},attrs:{placement:"top",width:"220"},model:{value:t.row.visible,callback:function(i){e.$set(t.row,"visible",i)},expression:"scope.row.visible"}},[a("p",[e._v("您是否确定"+e._s(1==t.row.enable?"关闭":"开启")+"这个问题")]),e._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.row.visible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(i){e.checksure(t.row)}}},[e._v("确定")])],1),e._v(" "),a("el-button",{attrs:{slot:"reference",size:"mini",type:"primary"},slot:"reference"},[e._v(e._s(1==t.row.enable?"关闭问题":"开启问题"))])],1),e._v(" "),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{slot:"reference",size:"mini",type:"danger"},on:{click:function(i){e.details(t.row.id)}},slot:"reference"},[e._v("查看详情")])]}}])})],1),e._v(" "),a("el-dialog",{attrs:{center:"","close-on-click-modal":!0,"close-on-press-escape":!0,width:"600px",title:"添加新的答案",visible:e.dialog.showkey},on:{close:e.beforeclose,"update:visible":function(t){e.$set(e.dialog,"showkey",t)}}},[a("el-form",{ref:"temporarys",attrs:{"label-position":"left",rules:e.temprule,model:e.dialog},nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-form-item",{attrs:{label:"新增问题","label-width":"120px"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:e.dialog.text,callback:function(t){e.$set(e.dialog,"text",t)},expression:"dialog.text"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"答案(勾选即为需要输入原因)","label-width":"120px"}},[a("el-checkbox-group",{model:{value:e.dialog.checkList,callback:function(t){e.$set(e.dialog,"checkList",t)},expression:"dialog.checkList"}},[e._l(e.dynamicTags,function(t,i){return a("el-checkbox",{key:i,staticClass:"otherel",attrs:{label:i}},[a("el-tag",{attrs:{closable:"","disable-transitions":!1},on:{close:function(i){e.handleClose(t)}}},[e._v("\n          "+e._s(t)+"\n        ")])],1)}),e._v(" "),e.inputVisible?a("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:e.handleInputConfirm},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.handleInputConfirm(t)}},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}}):a("el-button",{staticClass:"button-new-tag",attrs:{size:"small",type:"primary"},on:{click:e.showInput}},[e._v("新增答案")])],2)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialog.showkey=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){e.sureckeck(e.dialog)}}},[e._v("确 定")])],1)],1),e._v(" "),a("pageing",{directives:[{name:"show",rawName:"v-show",value:e.page.totalnum,expression:"page.totalnum"}],attrs:{pageing:e.page},on:{pagechange:e.pagechange}})],1)},staticRenderFns:[]};var c=i("VU/8")(o,r,!1,function(e){i("vVca")},"data-v-12e64a22",null);t.default=c.exports},vVca:function(e,t,i){var a=i("4eIM");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);i("rjj0")("73ce14e1",a,!0)}});