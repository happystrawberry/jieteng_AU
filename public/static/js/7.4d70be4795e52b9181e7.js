webpackJsonp([7],{"1LBo":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n("HVYF"),a=(n("Kb+Q"),n("M9A7")),i=n("0xDb"),r={methods:{handleSelectionChange:function(){console.log(23123)},parsedate:function(e){return Object(i.a)(e)},getSummarie:function(e){var t=e.columns,n=e.data,s=[];return t.forEach(function(e,t){if(0!==t){var a=n.map(function(t){return Number(t[e.property])});!a.every(function(e){return isNaN(e)})&&[9].indexOf(t)>-1?(s[t]=a.reduce(function(e,t){var n=Number(t);return isNaN(n)?e:e+t},0),s[t]+=""):s[t]=" "}else s[t]="合计"}),s},submit:function(){var e=this,t=this.item,n=[];if(this.item.question_list.some(function(e){return console.log(e),-1==e.choice.pos}))this.$message({message:"请先填写完整客户回访列表",type:"warning"});else{for(var s in this.item.question_list)n.push({id:this.item.question_list[s].id,choice:this.item.question_list[s].choice.pos,cause:this.item.question_list[s].choice.causes});Object(a.a)("service/savefeedback",{order_id:t.order_id,age:this.fromlist.age,sexy:this.fromlist.sexy,address:this.fromlist.address,questions:n,remark:t.feedback_remark}).then(function(t){e.$notify({title:"成功",message:"回访成功",type:"success"})})}},gotobeizhu:function(){var e=this.$router.resolve({name:"remarkindex",query:{id:this.$route.query.id}});window.open(e.href,"_blank")},getSummaries:function(e){var t=e.columns,n=e.data,s=[];return t.forEach(function(e,t){if(0!==t){var a=n.map(function(t){return Number(t[e.property])});console.log([9].indexOf(t)>-1,t),!a.every(function(e){return isNaN(e)})&&[3,5,7].indexOf(t)>-1?(s[t]=a.reduce(function(e,t){var n=Number(t);return isNaN(n)?e:e+t},0),s[t]=s[t].toFixed(2),5!=t&&7!=t||(s[t]="¥ "+s[t])):s[t]=" "}else s[t]="合计"}),s},checkcheck:function(e,t){console.log(e);e.columns,e.data;console.log(12312312)}},mounted:function(){var e=this,t=this,n=this.$route.query.id;Object(a.a)("common/ordernotelist",{order_id:this.$route.query.id}).then(function(t){e.info=t.data.list.length>0?t.data.list[t.data.list.length-1]:{}}),Object(a.a)("common/getoptypelist").then(function(t){e.typelist=t.data.list}),Object(a.a)("service/vieworder",{order_id:n}).then(function(n){var s=n.data;for(var a in s.feedback_maintenance=s.feedback_maintenance,s.feedback_rest_zone=s.feedback_rest_zone,s.feedback_service_attitude=s.feedback_service_attitude,s.feedback_service_environment=s.feedback_service_environment,s.question_list)s.question_list[a].choice.pos=parseInt(s.question_list[a].choice.pos);t.item=s,e.fromlist.age=s.owner_age,e.fromlist.address=s.owner_addr,e.fromlist.sexy=s.owner_sexy,e.$message({message:"数据已更新",type:"success"})})},components:{message:s.a},data:function(){return{item:{},info:{},fromlist:{age:"",sexy:"",address:""},typelist:[],evaluate:[{value:"0",text:"极差"},{value:"1",text:"失望"},{value:"2",text:"一般"},{value:"3",text:"满意"},{value:"4",text:"惊喜"}],otherdata:[{name:"张三",times:"1.4",payment:20},{name:"张三",times:"1.4",payment:20},{name:"张三",times:"1.4",payment:20},{name:"张三",times:"1.4",payment:20}],form:{maintenance:"",service_attitude:"",service_environment:"",rest_zone:""},pay:["支付宝付款","微信付款","现金结算","会员卡结算","挂账"],remuneration:[],draw:[],multipleTable:[],multipleTables:[],formInline:{ordernumber:"",owner:"",plate:"",model:"",phone:"",counselor:"",account:"",overtime:""},checkList:[],data:[]}}},l={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"zone-content details"},[n("message",{attrs:{info:e.info}}),e._v(" "),n("h3",[e._v("回访单")]),e._v(" "),n("div",{staticStyle:{"margin-bottom":"40px"}},[n("el-row",{attrs:{type:"flex",jusitfy:"space-between"}},[n("el-col",{staticClass:"left"},[n("div",[e._v("单号:"+e._s(e.item.order_sn))]),e._v(" "),n("img",{attrs:{height:"50px",src:"data:image/jpeg;base64,"+e.item.barcode,alt:""}})]),e._v(" "),n("el-col",{staticClass:"right"},[n("el-button",{attrs:{size:"medium",type:"primary"},nativeOn:{click:function(t){e.gotobeizhu(t)}}},[e._v("备注("+e._s(e.item.notes)+")")])],1)],1),e._v(" "),n("span",[e._v(" 订单状态:"+e._s(e.item.order_status))])],1),e._v(" "),n("div",{staticStyle:{margin:"30px 0"}},[n("el-row",{staticClass:"info",attrs:{gutter:20}},[n("el-col",{attrs:{"el-col":"",shadow:"always",xs:{span:12},sm:{span:8},md:{span:8},lg:{span:8}}},[n("span",[e._v("单号:")]),e._v(" "),n("span",[e._v(e._s(e.item.order_sn))])]),e._v(" "),n("el-col",{attrs:{"el-col":"",shadow:"always",xs:{span:12},sm:{span:8},md:{span:8},lg:{span:8}}},[n("span",[e._v("联系人:")]),e._v(" "),n("span",[e._v(e._s(e.item.contact_name))])]),e._v(" "),n("el-col",{attrs:{"el-col":"",shadow:"always",xs:{span:12},sm:{span:8},md:{span:8},lg:{span:8}}},[n("span",[e._v("手机号:")]),e._v(" "),n("span",[e._v(e._s(e.item.phone))])]),e._v(" "),n("el-col",{attrs:{"el-col":"",shadow:"always",xs:{span:12},sm:{span:8},md:{span:8},lg:{span:8}}},[n("span",[e._v("车牌:")]),e._v(" "),n("span",[e._v(e._s(e.item.vehicle_number))])]),e._v(" "),n("el-col",{attrs:{"el-col":"",shadow:"always",xs:{span:12},sm:{span:8},md:{span:8},lg:{span:8}}},[n("span",[e._v("车型:")]),e._v(" "),n("span",[e._v(e._s(e.item.brand)+" "+e._s(e.item.model)+" "+e._s(e.item.vehicle_model))])]),e._v(" "),n("el-col",{attrs:{"el-col":"",shadow:"always",xs:{span:12},sm:{span:8},md:{span:8},lg:{span:8}}},[n("span",[e._v("完工时间:")]),e._v(" "),n("span",[e._v(e._s(e.item.final_endtime>0?e.parsedate(e.item.final_endtime):"完工时间未知"))])]),e._v(" "),n("el-col",{attrs:{"el-col":"",shadow:"always",xs:{span:12},sm:{span:8},md:{span:8},lg:{span:8}}},[n("span",[e._v("客户来源:")]),e._v(" "),n("span",[e._v(e._s(e.item.customer_source?e.item.customer_source:"客户来源未知"))])]),e._v(" "),n("el-col",{attrs:{"el-col":"",shadow:"always",xs:{span:12},sm:{span:8},md:{span:8},lg:{span:8}}},[n("span",[e._v("车主年龄:")]),e._v(" "),n("el-input",{staticStyle:{width:"200px !important"},attrs:{size:"mini"},model:{value:e.fromlist.age,callback:function(t){e.$set(e.fromlist,"age",t)},expression:"fromlist.age"}})],1),e._v(" "),n("el-col",{attrs:{"el-col":"",shadow:"always",xs:{span:12},sm:{span:8},md:{span:8},lg:{span:8}}},[n("span",[e._v("车主性别:")]),e._v(" "),n("el-select",{staticStyle:{width:"200px !important"},attrs:{size:"mini"},model:{value:e.fromlist.sexy,callback:function(t){e.$set(e.fromlist,"sexy",t)},expression:"fromlist.sexy"}},[n("el-option",{attrs:{label:"男",value:"0"}}),e._v(" "),n("el-option",{attrs:{label:"女",value:"1"}})],1)],1),e._v(" "),n("el-col",{attrs:{"el-col":"",shadow:"always",xs:{span:12},sm:{span:8},md:{span:8},lg:{span:8}}},[n("span",[e._v("车主地址:")]),e._v(" "),n("el-input",{staticStyle:{width:"200px !important"},attrs:{size:"mini"},model:{value:e.fromlist.address,callback:function(t){e.$set(e.fromlist,"address",t)},expression:"fromlist.address"}})],1)],1)],1),e._v(" "),n("div",{staticClass:"table"},[e._m(0),e._v(" "),n("el-table",{ref:"multipleTable",staticStyle:{width:"900px"},attrs:{border:"",data:e.item.item_list,"summary-method":e.getSummaries,"show-summary":"","tooltip-effect":"dark",stripe:""},on:{"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{label:"编号","header-align":"center",align:"center",prop:"order_id",width:"100"}}),e._v(" "),n("el-table-column",{attrs:{prop:"op_number","header-align":"center",align:"center",label:"项目编码",width:"100"}}),e._v(" "),n("el-table-column",{attrs:{prop:"item_name","header-align":"center",align:"center",label:"项目名称",width:"100"}}),e._v(" "),n("el-table-column",{attrs:{prop:"item_times","header-align":"center",align:"center",label:"工时/小时",width:"100"}}),e._v(" "),n("el-table-column",{attrs:{prop:"item_cost","header-align":"center",align:"center",label:"工时费",width:"100"}}),e._v(" "),n("el-table-column",{attrs:{prop:"money","header-align":"center",align:"center",label:"应收金额",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(parseFloat(t.row.item_cost)*parseFloat(t.row.item_times))+"\n          ")]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"discount","header-align":"center",align:"center",label:"折扣",width:"100"}}),e._v(" "),n("el-table-column",{attrs:{prop:"final_price","header-align":"center",align:"center",label:"折后金额",width:"100"}}),e._v(" "),n("el-table-column",{attrs:{prop:"quality_status","header-align":"center",align:"center",label:"业务类别"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-tag",[e._v(e._s(e.typelist[t.row.quality_status].name))])]}}])})],1)],1),e._v(" "),n("div",{staticClass:"table"},[e._m(1),e._v(" "),n("el-table",{ref:"multipleTable",staticStyle:{width:"1300px"},attrs:{border:"",data:e.item.part_list,"summary-method":e.getSummarie,"show-summary":"","tooltip-effect":"dark",stripe:""},on:{"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{label:"编号","header-align":"center",align:"center",prop:"order_id",width:"100"}}),e._v(" "),n("el-table-column",{attrs:{prop:"parts_sn","header-align":"center",align:"center",label:"项目编码",width:"100"}}),e._v(" "),n("el-table-column",{attrs:{prop:"op_type","header-align":"center",align:"center",label:"业务类型",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-tag",[e._v(e._s(e.typelist[t.row.op_type].name))])]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"parts_name","header-align":"center",align:"center",label:"商品名称",width:"100"}}),e._v(" "),n("el-table-column",{attrs:{prop:"spec","header-align":"center",align:"center",label:"规格",width:"100"}}),e._v(" "),n("el-table-column",{attrs:{prop:"unit","header-align":"center",align:"center",label:"单位",width:"100"}}),e._v(" "),n("el-table-column",{attrs:{prop:"amount","header-align":"center",align:"center",label:"数量",width:"100"}}),e._v(" "),n("el-table-column",{attrs:{prop:"sell_price","header-align":"center",align:"center",label:"应收金额",width:"100"}}),e._v(" "),n("el-table-column",{attrs:{prop:"discount","header-align":"center",align:"center",label:"折扣",width:"100"}}),e._v(" "),n("el-table-column",{attrs:{prop:"final_price","header-align":"center",align:"center",label:"折后金额"}})],1)],1),e._v(" "),n("div",{staticClass:"table"},[n("h3",{staticStyle:{margin:"20px 0"}},[e._v("客户回访列表")]),e._v(" "),n("el-form",{staticClass:"zonebg",attrs:{"label-position":"top","label-width":"80px"}},[e._l(e.item.question_list,function(t,s){return n("el-form-item",{key:s,attrs:{label:s+1+"、"+t.question}},[n("el-radio-group",{model:{value:t.choice.pos,callback:function(n){e.$set(t.choice,"pos",n)},expression:"item.choice.pos"}},e._l(t.options,function(t,s){return n("el-radio",{key:s,attrs:{label:s}},[e._v(e._s(t))])})),e._v(" "),-1!=t.choice.pos&&1==t.need_cause[t.choice.pos]?n("el-input",{staticStyle:{width:"400px",display:"block","margin-top":"10px"},attrs:{type:"textarea",rows:5,placeholder:"请输入原因"},model:{value:t.choice.causes,callback:function(n){e.$set(t.choice,"causes",n)},expression:"item.choice.causes"}}):e._e()],1)}),e._v(" "),n("el-input",{attrs:{type:"textarea",rows:10,placeholder:"还有什么想说的"},model:{value:e.item.feedback_remark,callback:function(t){e.$set(e.item,"feedback_remark",t)},expression:"item.feedback_remark"}}),e._v(" "),n("el-button",{staticClass:"submit",attrs:{type:"primary"},on:{click:e.submit}},[e._v("保存")])],2)],1)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"table-header"},[t("h2",[this._v("维修记录")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"table-header"},[t("h2",[this._v("材料")])])}]};var o=n("VU/8")(r,l,!1,function(e){n("GM/E")},"data-v-1d5c91a0",null);t.default=o.exports},"GM/E":function(e,t,n){var s=n("RIvv");"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);n("rjj0")("6747f905",s,!0)},"Kb+Q":function(e,t,n){"use strict";e.exports=function(){var e=n("vzCy"),t={};return t.createDomain=t.create=function(){var t=new e.EventEmitter;function n(e){t.emit("error",e)}return t.add=function(e){e.on("error",n)},t.remove=function(e){e.removeListener("error",n)},t.bind=function(e){return function(){var t=Array.prototype.slice.call(arguments);try{e.apply(null,t)}catch(e){n(e)}}},t.intercept=function(e){return function(t){if(t)n(t);else{var s=Array.prototype.slice.call(arguments,1);try{e.apply(null,s)}catch(t){n(t)}}}},t.run=function(e){try{e()}catch(e){n(e)}return this},t.dispose=function(){return this.removeAllListeners(),this},t.enter=t.exit=function(){return this},t},t}.call(this)},RIvv:function(e,t,n){(e.exports=n("FZ+f")(!1)).push([e.i,"\n.submit[data-v-1d5c91a0] {\n  display: block;\n  margin: 30px auto;\n}\n.pay[data-v-1d5c91a0] {\n  text-align: center;\n}\n.pay .el-tag[data-v-1d5c91a0] {\n    margin-right: 20px;\n}\n.el-tag[data-v-1d5c91a0] {\n  padding: 0 15px;\n}\n.model[data-v-1d5c91a0] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n}\n.model > span[data-v-1d5c91a0] {\n    margin-right: 20px;\n}\n.info span[data-v-1d5c91a0] {\n  line-height: 20px;\n}\n.info span[data-v-1d5c91a0]:last-child {\n    color: #aaa;\n    margin-left: 10px;\n}\n.el-col[data-v-1d5c91a0] {\n  margin-bottom: 20px;\n}\n.el-col.left[data-v-1d5c91a0] {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n}\n.el-col.left img[data-v-1d5c91a0] {\n      margin-left: 30px;\n}\n.el-col.right[data-v-1d5c91a0] {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n    -webkit-box-pack: end;\n        -ms-flex-pack: end;\n            justify-content: flex-end;\n}\n.table[data-v-1d5c91a0] {\n  margin-bottom: 40px;\n}\n.table-header[data-v-1d5c91a0] {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n}\n.table-header div[data-v-1d5c91a0] {\n      margin-left: 50px;\n}\n",""])},vzCy:function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function s(e){return"function"==typeof e}function a(e){return"object"==typeof e&&null!==e}function i(e){return void 0===e}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,r,l,o,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||a(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var p=new Error('Uncaught, unspecified "error" event. ('+t+")");throw p.context=t,p}if(i(n=this._events[e]))return!1;if(s(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:l=Array.prototype.slice.call(arguments,1),n.apply(this,l)}else if(a(n))for(l=Array.prototype.slice.call(arguments,1),r=(c=n.slice()).length,o=0;o<r;o++)c[o].apply(this,l);return!0},n.prototype.addListener=function(e,t){var r;if(!s(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,s(t.listener)?t.listener:t),this._events[e]?a(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,a(this._events[e])&&!this._events[e].warned&&(r=i(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&r>0&&this._events[e].length>r&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){if(!s(t))throw TypeError("listener must be a function");var n=!1;function a(){this.removeListener(e,a),n||(n=!0,t.apply(this,arguments))}return a.listener=t,this.on(e,a),this},n.prototype.removeListener=function(e,t){var n,i,r,l;if(!s(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(r=(n=this._events[e]).length,i=-1,n===t||s(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(a(n)){for(l=r;l-- >0;)if(n[l]===t||n[l].listener&&n[l].listener===t){i=l;break}if(i<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(s(n=this._events[e]))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){return this._events&&this._events[e]?s(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(s(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}}});