webpackJsonp([13],{CA6O:function(e,t,n){var i=n("WTxP");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n("rjj0")("7dcd8d84",i,!0)},WTxP:function(e,t,n){(e.exports=n("FZ+f")(!1)).push([e.i,"\n.title {\n  margin: 20px 0;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n}\n.title h3 {\n    margin-right: 20px;\n}\n.content {\n  margin-top: 40px;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n}\n.content .ct {\n    -webkit-box-flex: 0;\n        -ms-flex: 0 0 400px;\n            flex: 0 0 400px;\n}\n.content .tips {\n    -webkit-box-flex: 1;\n        -ms-flex: 1;\n            flex: 1;\n}\n.content .tips-list {\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n      width: 600px;\n      -webkit-box-pack: justify;\n          -ms-flex-pack: justify;\n              justify-content: space-between;\n}\n",""])},"uxe+":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("QiB2"),l=n("0xDb"),a=n("M9A7"),o={components:{Pageing:i.a},data:function(){return{formInline:{time:"",checkconsultant:"",consultant:[],maintain:[],maintainer:""},info:{},keyword:!1,page:{},list:[],lists:[],chartData:{columns:["项目","销售金额"],rows:[]}}},mounted:function(){var e=this;Object(a.a)("common/getallconsultantlist").then(function(t){e.formInline.consultant=t.data.list}),Object(a.a)("common/getalloperators").then(function(t){e.formInline.maintain=t.data.list})},methods:{checkdate:function(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?Object(l.a)(e):Object(l.a)(e).split(" ")[0]},removetag:function(e){this.keyword&&(this.getinfo(),this.getlist({consultant:this.formInline.maintainer.length>0?this.formInline.maintainer.join(","):"",operator:this.formInline.checkconsultant.length>0?this.formInline.checkconsultant.join(","):"",begin_time:this.formInline.time?this.formInline.time[0]/1e3:"",end_time:this.formInline.time?this.formInline.time[1]/1e3:""}))},pagechange:function(e){this.getlist({consultant:this.formInline.maintainer.length>0?this.formInline.maintainer.join(","):"",operator:this.formInline.checkconsultant.length>0?this.formInline.checkconsultant.join(","):"",begin_time:this.formInline.time?this.formInline.time[0]/1e3:"",end_time:this.formInline.time?this.formInline.time[1]/1e3:"",page:e})},donwload:function(){var e=this.formInline;this.HttpDownload("/api/stat/selllist?consultant="+(this.formInline.maintainer.length>0?this.formInline.maintainer.join(","):"")+"&export=1&operator="+(this.formInline.checkconsultant.length>0?this.formInline.checkconsultant.join(","):"")+"&begin_time="+(e.time?e.time[0]/1e3:"")+"&end_time="+(e.time?e.time[1]/1e3:""),"销售订单列表.xls")},getinfo:function(){var e=this;Object(a.a)("stat/sell",{consultant:this.formInline.maintainer.length>0?this.formInline.maintainer.join(","):"",operator:this.formInline.checkconsultant.length>0?this.formInline.checkconsultant.join(","):"",begin_time:this.formInline.time?this.formInline.time[0]/1e3:"",end_time:this.formInline.time?this.formInline.time[1]/1e3:""}).then(function(t){console.log(t.data.list),e.keyword=!0;var n=t.data.list,i=[];for(var l in n)i.push({"项目":n[l].type,"销售金额":n[l].total});e.chartData.rows=i,e.lists=t.data.list,e.info={single_value:t.data.single_value,total_commission:t.data.total_commission,total_income:t.data.total_income,vehicle_num:t.data.vehicle_num}})},checkdetail:function(e){var t=this.$router.resolve({name:"orrdersgoodsdetails",query:{id:e.row.id}});window.open(t.href,"_blank")},onSubmit:function(e){""!=this.formInline.time?(this.getinfo(),this.getlist({consultant:this.formInline.maintainer.length>0?this.formInline.maintainer.join(","):"",operator:this.formInline.checkconsultant.length>0?this.formInline.checkconsultant.join(","):"",begin_time:this.formInline.time?this.formInline.time[0]/1e3:"",end_time:this.formInline.time?this.formInline.time[1]/1e3:""})):this.$message({showClose:!0,message:"请先填写查询时间",type:"warning"})},getlist:function(e){var t=this;Object(a.a)("stat/selllist",e).then(function(e){t.list=e.data.list;var n=e.data.page;for(var i in n)n[i]=parseInt(n[i]);t.page=n,t.$message({showClose:!0,message:"数据已更新",type:"success"})})}}},s={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"zone-content"},[n("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.onSubmit(t)}}},[e.formInline.time||""==e.formInline.time||null==e.formInline.time?n("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!e.formInline.hidetime,expression:"!formInline.hidetime"}]},[n("el-date-picker",{attrs:{size:"mini",type:"daterange","range-separator":"至","start-placeholder":"开始日期","default-time":["00:00:00","23:59:59"],"value-format":"timestamp","end-placeholder":"结束日期"},model:{value:e.formInline.time,callback:function(t){e.$set(e.formInline,"time",t)},expression:"formInline.time"}})],1):e._e(),e._v(" "),n("el-form-item",{staticClass:"otherinput"},[n("el-select",{attrs:{size:"mini",clearable:"",filterable:"",multiple:"",placeholder:"售后顾问"},on:{"remove-tag":e.removetag},model:{value:e.formInline.checkconsultant,callback:function(t){e.$set(e.formInline,"checkconsultant",t)},expression:"formInline.checkconsultant"}},e._l(e.formInline.consultant,function(e,t){return n("el-option",{key:t,staticStyle:{width:"200px"},attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),n("el-form-item",{staticClass:"otherinput"}),e._v(" "),n("el-form-item",[n("el-button",{staticStyle:{transform:"translateY(-1px)"},attrs:{size:"mini",type:"primary"},on:{click:e.onSubmit},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.onSubmit(t)}}},[e._v("搜索")])],1)],1),e._v(" "),e.keyword&&e.formInline.time?n("div",[n("div",{staticClass:"title"},[n("h3",[e._v("销售统计图")]),e._v(" "),n("el-button",{staticStyle:{transform:"translateY(-1px)"},attrs:{size:"mini",type:"primary"},on:{click:e.donwload}},[e._v("下载数据")])],1),e._v(" "),n("div",[e._v("查询时间:"+e._s(e.formInline.time?e.checkdate(e.formInline.time[0]/1e3):e.checkdate(e.formInline.time[1]/1e3)))]),e._v(" "),n("div",{staticClass:"content"},[n("div",{staticClass:"ct"},[n("ve-pie",{attrs:{data:e.chartData}})],1),e._v(" "),n("div",{staticClass:"tips",staticStyle:{"margin-left":"100px"}},[n("div",[n("el-table",{staticStyle:{width:"550px"},attrs:{data:e.lists,border:"",align:"center"}},[n("el-table-column",{attrs:{prop:"type",label:"项目",align:"center","header-align":"center"}}),e._v(" "),n("el-table-column",{attrs:{prop:"total",label:"销售金额",align:"center","header-align":"center"}}),e._v(" "),n("el-table-column",{attrs:{prop:"rate",label:"提成比例",align:"center","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                  "+e._s(t.row.rate>0?parseFloat(t.row.rate).toFixed(2):0)+"\n              ")]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"fee",label:"提成金额",align:"center","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                  "+e._s(t.row.fee>0?parseFloat(t.row.fee).toFixed(2):0)+"\n            ")]}}])})],1),e._v(" "),n("div",{staticClass:"tips-list"},[n("p",[e._v("总金额:"+e._s(e.info.total_income)+"元")]),e._v(" "),n("p",[e._v("总提成金额:"+e._s(e.info.total_commission)+"元")]),e._v(" "),n("p",[e._v("已支付车辆数:"+e._s(e.info.vehicle_num>0?e.info.vehicle_num:0)+"辆")]),e._v(" "),n("p",[e._v("单车产值:"+e._s(e.info.single_value)+"元")])])],1)])]),e._v(" "),e._m(0),e._v(" "),n("el-table",{staticStyle:{width:"700px"},attrs:{data:e.list,border:"",align:"center"}},[n("el-table-column",{attrs:{prop:"order_sn",label:"单号",align:"center","header-align":"center"}}),e._v(" "),n("el-table-column",{attrs:{prop:"bill_time",label:"结算时间",align:"center","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n               "+e._s(e.checkdate(t.row.pay_time,!0))+"\n            ")]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"结算金额",prop:"total_cost",align:"center","header-align":"center"}}),e._v(" "),n("el-table-column",{attrs:{prop:"num",label:"操作",align:"center","header-align":"center",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(n){e.checkdetail(t)}}},[e._v("查看详情")])]}}])})],1),e._v(" "),n("pageing",{directives:[{name:"show",rawName:"v-show",value:e.page.totalnum,expression:"page.totalnum"}],attrs:{pageing:e.page},on:{pagechange:e.pagechange}})],1):e._e()],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"title"},[t("h3",[this._v("订单列表")])])}]};var r=n("VU/8")(o,s,!1,function(e){n("CA6O")},null,null);t.default=r.exports}});