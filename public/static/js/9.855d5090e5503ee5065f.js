webpackJsonp([9],{"20jS":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("0xDb"),a=i("M9A7"),l=i("TIfe"),s=void 0,r={components:{Messagelist:i("HVYF").a},methods:{handleSelectionChange:function(t){this.checklist=t},toggleSelection:function(t){var e=this;t?t.forEach(function(t){e.$refs.multipleTable.toggleRowSelection(t)}):this.$refs.multipleTable.clearSelection()},toggleSelections:function(t){var e=this;t?t.forEach(function(t){e.$refs.multipleTables.toggleRowSelection(t)}):this.$refs.multipleTables.clearSelection()},handleSelectionChanges:function(t){this.checklists=t},gotobeizhu:function(){var t=this.$router.resolve({name:"remarkindex",query:{id:this.$route.query.id}});window.open(t.href,"_blank")},onecode:function(){(s=getLodop(document.getElementById("LODOP1"),document.getElementById("LODOP_EM1"))).ADD_PRINT_BARCODE(40,200,400,47,"EAN128B",this.item.order_sn),s.SET_PRINT_STYLEA(0,"AlignJustify",2),s.PRINT_DESIGN()},print:function(){var t=this;this.printtime=this.checkdate((new Date).getTime()),setTimeout(function(){try{var e=getLodop();e.VERSION?(e.PRINT_INIT(""),e.SET_PRINT_STYLE("FontSize",18),e.SET_PRINT_STYLE("Bold",1),e.ADD_PRINT_HTM(40,5,"100%","100%",document.getElementById("form1").innerHTML),e.PREVIEW()):t.$message({showClose:!0,message:"打印控件未安装,请先联系管理员下载安装",type:"warning"})}catch(t){}},500)},retruns:function(){this.$router.push({name:"orderdetails",query:{id:this.$route.query.id}})},checks:function(t){var e=this,i=this;if(0!=this.checklists.length){var n,l=[];i.checklists;for(var s in i.checklists)l.push(i.checklists[s].id);n=l.join(","),Object(a.a)("quality/setstatus",{id:n,type:"part",pass:t?1:0}).then(function(n){i.$notify({message:"勾选"+(t?"材料质检合格":"材料返工")+"操作成功",type:"success",offset:100,duration:1500});var a=function(i){var n=e.materials.findIndex(function(t){return console.log(t.id,l[i]),t.id==l[i]});n>-1&&(e.materials[n].quality_status=""+(t?1:2))};for(var s in l)a(s);e.toggleSelections()})}else this.$message({message:"请先勾选表格",type:"warning"})},check:function(t){var e=this,i=this;if(0!=this.checklist.length){var n,l=[];i.checkList;for(var s in this.checklist)console.log(this.checklist[s].id),l.push(this.checklist[s].id);n=l.join(","),Object(a.a)("quality/setstatus",{id:n,type:"item",pass:t?1:0}).then(function(n){i.$notify({message:"勾选"+(t?"项目质检合格":"项目返工给班组")+"操作成功",type:"success",offset:100,duration:1500});var a=function(i){var n=e.multipleTable.findIndex(function(t){return console.log(t.id,l[i]),t.id==l[i]});n>-1&&(e.multipleTable[n].quality_status=""+(t?1:2))};for(var s in l)a(s);e.toggleSelection()})}else this.$message({message:"请先勾选表格",type:"warning"})},update:function(){var t=this;Object(a.a)("quality/vieworder",{order_id:this.$route.query.id}).then(function(e){t.item=e.data,t.multipleTable=e.data.item_list;var i=e.data.part_list;t.materials=i.filter(function(t){return 2!=t.parts_status}),t.$message({message:"数据已更新",type:"success"}),t.loading=!1}),Object(a.a)("common/ordernotelist",{order_id:Object(l.a)("uid")}).then(function(e){t.info=e.data.list[0]||{}})},checkdate:function(t){return Object(n.a)(t)}},mounted:function(){this.$route.query.id;this.update()},data:function(){return{item:{},info:{},printtime:"",loading:!0,checklists:[],materials:[],multipleTable:[],otherdata:[],remuneration:[],formInline:{},checkList:[],data:[]}}},o={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"zone-content details quelist-details"},[i("div",{staticClass:"print-ct",attrs:{id:"form1"}},[i("div",{staticClass:"print-ct-header",staticStyle:{display:"flex","margin-bottom":"20px"}},[i("div",{staticStyle:{"-webkit-box-flex":"0","-ms-flex":"0 0 33%",flex:"0 0 33%","line-height":"30px",height:"30px",margin:"0","font-size":"16px"}},[t._v("单号:"+t._s(t.item.order_sn))]),t._v(" "),i("div",{staticStyle:{"-webkit-box-flex":"0","-ms-flex":"0 0 33%",flex:"0 0 33%","line-height":"30px",height:"30px",margin:"0","font-size":"16px"}}),t._v(" "),i("div",{staticStyle:{"-webkit-box-flex":"0","-ms-flex":"0 0 33%",flex:"0 0 33%","line-height":"30px",height:"30px",margin:"0","font-size":"16px"}},[t._v("打印时间:"+t._s(t.printtime))])]),t._v(" "),i("div",[i("span",[t._v("订单状态:"+t._s(t.item.order_status))])]),t._v(" "),i("div",{staticStyle:{margin:"20px 0"}},[i("span",[t._v("业务类型:"+t._s(t.item.op_type?t.item.op_type.join(" "):""))])]),t._v(" "),i("h3",{staticStyle:{"margin-bottom":"20px"}},[t._v("车辆信息")]),t._v(" "),i("div",{staticClass:"ul",staticStyle:{width:"700px",display:"flex","-ms-flex-wrap":"wrap","flex-wrap":"wrap","-webkit-box-pack":"justify","-ms-flex-pack":"justify","justify-content":"space-between"}},[i("p",{staticClass:"list",staticStyle:{"-webkit-box-flex":"0","-ms-flex":"0 0 33%",flex:"0 0 33%","font-size":"13px","line-height":"30px",height:"30px",margin:"0"}},[t._v("单号:"+t._s(t.item.order_sn?t.item.oder_sn:"未填写"))]),t._v(" "),i("p",{staticClass:"list",staticStyle:{"-webkit-box-flex":"0","-ms-flex":"0 0 33%",flex:"0 0 33%","font-size":"13px","line-height":"30px",height:"30px",margin:"0"}},[t._v("车主:"+t._s(t.item.vehicle_owner?t.item.vehicle_owner:"未填写"))]),t._v(" "),i("p",{staticClass:"list",staticStyle:{"-webkit-box-flex":"0","-ms-flex":"0 0 33%",flex:"0 0 33%","font-size":"13px","line-height":"30px",height:"30px",margin:"0"}},[t._v("车牌:"+t._s(t.item.vehicle_number?t.item.vehicle_number:"未填写"))]),t._v(" "),i("p",{staticClass:"list",staticStyle:{"-webkit-box-flex":"0","-ms-flex":"0 0 33%",flex:"0 0 33%","font-size":"13px","line-height":"30px",height:"30px",margin:"0"}},[t._v("车型:"+t._s(t.item.vehicle_model?t.item.vehicle_model:"未填写"))]),t._v(" "),i("p",{staticClass:"list",staticStyle:{"-webkit-box-flex":"0","-ms-flex":"0 0 33%",flex:"0 0 33%","font-size":"13px","line-height":"30px",height:"30px",margin:"0"}},[t._v("预计完工时间:"+t._s(t.item.plan_endtime?t.checkdate(t.item.plan_endtime):"未说明完工时间"))]),t._v(" "),i("p",{staticClass:"list",staticStyle:{"-webkit-box-flex":"0","-ms-flex":"0 0 33%",flex:"0 0 33%","font-size":"13px","line-height":"30px",height:"30px",margin:"0"}},[t._v("完工时间:"+t._s(t.item.final_endtime?t.checkdate(t.item.final_endtime):"未完成"))])]),t._v(" "),t.multipleTable.length>0?i("div",{staticClass:"printitem",staticStyle:{"margin-bottom":"40px"}},[i("h3",{staticStyle:{"margin-bottom":"20px"}},[t._v("项目与工时")]),t._v(" "),i("table",{staticStyle:{margin:"0 auto","border-collapse":"collapse","table-layout":"fixed",border:"solid 1px black"},attrs:{border:"1",width:"600",height:"30",cellspacing:"0"}},[t._m(0),t._v(" "),t._l(t.multipleTable,function(e,n){return i("tr",{key:n},[i("td",{staticStyle:{border:"solid 1px black"},attrs:{width:"104",height:"30",align:"center"}},[t._v(t._s(e.order_id))]),t._v(" "),i("td",{staticStyle:{border:"solid 1px black"},attrs:{width:"104",height:"30",align:"center"}},[t._v(t._s(e.op_number))]),t._v(" "),i("td",{staticStyle:{border:"solid 1px black"},attrs:{width:"104",height:"30",align:"center"}},[t._v(t._s(e.item_name))]),t._v(" "),i("td",{staticStyle:{border:"solid 1px black"},attrs:{width:"150",height:"30",align:"center"}},[t._v(t._s(e.operator))])])})],2)]):t._e(),t._v(" "),t.materials.length>0?i("div",{staticClass:"printitem"},[i("h3",{staticStyle:{"margin-bottom":"20px"}},[t._v("材料质检")]),t._v(" "),i("table",{staticStyle:{margin:"0 auto","border-collapse":"collapse","table-layout":"fixed",border:"solid 1px black"},attrs:{border:"1",width:"600",height:"30",cellspacing:"0"}},[t._m(1),t._v(" "),t._l(t.materials,function(e,n){return i("tr",{key:n},[i("td",{staticStyle:{border:"solid 1px black"},attrs:{width:"104",height:"30",align:"center"}},[t._v(t._s(e.id))]),t._v(" "),i("td",{staticStyle:{border:"solid 1px black"},attrs:{width:"104",height:"30",align:"center"}},[t._v(t._s(e.parts_sn))]),t._v(" "),i("td",{staticStyle:{border:"solid 1px black"},attrs:{width:"200",height:"30",align:"center"}},[t._v(t._s(e.parts_name.split(" ")[0]))]),t._v(" "),i("td",{staticStyle:{border:"solid 1px black"},attrs:{width:"104",height:"30",align:"center"}},[t._v(t._s(e.spec))]),t._v(" "),i("td",{staticStyle:{border:"solid 1px black"},attrs:{width:"104",height:"30",align:"center"}},[t._v(t._s(e.unit))]),t._v(" "),i("td",{staticStyle:{border:"solid 1px black"},attrs:{width:"104",height:"30",align:"center"}},[t._v(t._s(e.amount))])])})],2)]):t._e()]),t._v(" "),i("div",{staticClass:"noprint"},[i("messagelist",{directives:[{name:"show",rawName:"v-show",value:t.info,expression:"info"}],attrs:{info:t.info}}),t._v(" "),i("el-row",{attrs:{type:"flex",jusitfy:"space-between"}},[i("el-col",{staticClass:"left"},[i("div",[t._v("单号:"+t._s(t.item.order_sn))]),t._v(" "),i("img",{staticStyle:{"max-width":"400px"},attrs:{height:"50px",src:"data:image/jpeg;base64,"+t.item.barcode,alt:""},on:{click:t.onecode}})]),t._v(" "),i("el-col",{staticClass:"right"},[i("el-button",{attrs:{size:"medium",type:"primary"},nativeOn:{click:function(e){t.print(e)}}},[t._v("打印质检单")]),t._v(" "),i("el-button",{attrs:{size:"medium",type:"primary"},nativeOn:{click:function(e){t.gotobeizhu(e)}}},[t._v("备注 ("+t._s(t.item.notes)+")")])],1)],1),t._v(" "),i("el-col",[i("span",[t._v(" 订单状态:"+t._s(t.item.order_status))]),t._v(" "),i("span",{staticStyle:{"margin-left":"100px"}},[t._v(" 排号:"+t._s(t.item.wait_number))])]),t._v(" "),i("el-col",{staticClass:"model"},[i("span",[t._v("业务类型")]),t._v(" "),i("el-checkbox-group",{model:{value:t.item.op_type,callback:function(e){t.$set(t.item,"op_type",e)},expression:"item.op_type"}},[i("el-checkbox",{attrs:{label:"维修"}}),t._v(" "),i("el-checkbox",{attrs:{label:"保养"}}),t._v(" "),i("el-checkbox",{attrs:{label:"钣喷"}}),t._v(" "),i("el-checkbox",{attrs:{label:"美容"}}),t._v(" "),i("el-checkbox",{attrs:{label:"改装"}}),t._v(" "),i("el-checkbox",{attrs:{label:"其他"}})],1)],1),t._v(" "),i("div",{staticStyle:{margin:"30px 0"}},[i("h2",[t._v("车辆信息")]),t._v(" "),i("el-row",{staticClass:"info",attrs:{gutter:20}},[i("el-col",{attrs:{"el-col":"",shadow:"always",xs:{span:12},sm:{span:6},md:{span:6},lg:{span:6}}},[i("span",[t._v("单号:")]),t._v(" "),i("span",[t._v(t._s(t.item.order_sn))])]),t._v(" "),i("el-col",{attrs:{"el-col":"",shadow:"always",xs:{span:12},sm:{span:6},md:{span:6},lg:{span:6}}},[i("span",[t._v("车主:")]),t._v(" "),i("span",[t._v(t._s(t.item.vehicle_owner))])]),t._v(" "),i("el-col",{attrs:{"el-col":"",shadow:"always",xs:{span:12},sm:{span:6},md:{span:6},lg:{span:6}}},[i("span",[t._v("车牌:")]),t._v(" "),i("span",[t._v(t._s(t.item.vehicle_number))])]),t._v(" "),i("el-col",{attrs:{"el-col":"",shadow:"always",xs:{span:12},sm:{span:6},md:{span:6},lg:{span:6}}},[i("span",[t._v("车型:")]),t._v(" "),i("span",[t._v(t._s(t.item.vehicle_model))])]),t._v(" "),i("el-col",{attrs:{"el-col":"",shadow:"always",xs:{span:12},sm:{span:6},md:{span:6},lg:{span:6}}},[i("span",[t._v("预计完工时间:")]),t._v(" "),i("span",[t._v(t._s(t.item.plan_endtime?t.checkdate(t.item.plan_endtime):"未说明完工时间"))])]),t._v(" "),i("el-col",{attrs:{"el-col":"",shadow:"always",xs:{span:12},sm:{span:6},md:{span:6},lg:{span:6}}},[i("span",[t._v("完工时间:")]),t._v(" "),i("span",[t._v(t._s(t.item.final_endtime?t.checkdate(t.item.final_endtime):"未完成"))])])],1)],1),t._v(" "),i("div",{staticClass:"table"},[i("div",{staticClass:"table-header"},[i("h2",[t._v("维修项目")]),t._v(" "),i("div",[i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){t.check(!1)}}},[t._v("返工给班组")]),t._v(" "),i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){t.check(!0)}}},[t._v("质检合格")])],1)]),t._v(" "),i("el-table",{ref:"multipleTable",staticStyle:{width:"756px"},attrs:{border:"",data:t.multipleTable,"tooltip-effect":"dark",stripe:""},on:{"selection-change":t.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),i("el-table-column",{attrs:{label:"编号","header-align":"center",align:"center",prop:"order_id",width:"100"}}),t._v(" "),i("el-table-column",{attrs:{prop:"op_number","header-align":"center",align:"center",label:"编码",width:"100"}}),t._v(" "),i("el-table-column",{attrs:{prop:"item_name","header-align":"center",align:"center",label:"维修",width:"200"}}),t._v(" "),i("el-table-column",{attrs:{prop:"operator","header-align":"center",align:"center",label:"维修班组",width:"200"}}),t._v(" "),i("el-table-column",{attrs:{prop:"status","header-align":"center",align:"center",label:"质检状态",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n              "+t._s(0==e.row.quality_status?"未质检":1==e.row.quality_status?"质检合格":"返工")+"\n           ")]}}])})],1)],1),t._v(" "),i("div",{staticClass:"table"},[i("div",{staticClass:"table-header"},[i("h2",[t._v("材料质检")]),t._v(" "),i("div",[i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){t.checks(!1)}}},[t._v("返工")]),t._v(" "),i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){t.checks(!0)}}},[t._v("质检合格")])],1)]),t._v(" "),i("el-table",{ref:"multipleTables",staticStyle:{width:"900px"},attrs:{border:"",data:t.materials,"tooltip-effect":"dark",stripe:""},on:{"selection-change":t.handleSelectionChanges}},[i("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),i("el-table-column",{attrs:{label:"编号","header-align":"center",align:"center",prop:"id",width:"100"}}),t._v(" "),i("el-table-column",{attrs:{prop:"parts_sn","header-align":"center",align:"center",label:"编码",width:"100"}}),t._v(" "),i("el-table-column",{attrs:{prop:"parts_name","header-align":"center",align:"center",label:"材料名称",width:"200"}}),t._v(" "),i("el-table-column",{attrs:{prop:"spec","header-align":"center",align:"center",label:"规格",width:"100"}}),t._v(" "),i("el-table-column",{attrs:{prop:"unit","header-align":"center",align:"center",label:"单位"}}),t._v(" "),i("el-table-column",{attrs:{prop:"amount","header-align":"center",align:"center",label:"数量"}}),t._v(" "),i("el-table-column",{attrs:{"header-align":"center",align:"center",label:"质检状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n              "+t._s(0==e.row.quality_status?"未质检":1==e.row.quality_status?"质检合格":"返工")+"\n           ")]}}])})],1)],1)],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("tr",[e("td",{staticStyle:{border:"solid 1px black"},attrs:{width:"104",height:"30",align:"center"}},[this._v("编号")]),this._v(" "),e("td",{staticStyle:{border:"solid 1px black"},attrs:{width:"104",height:"30",align:"center"}},[this._v("材料编码")]),this._v(" "),e("td",{staticStyle:{border:"solid 1px black"},attrs:{width:"104",height:"30",align:"center"}},[this._v("维修")]),this._v(" "),e("td",{staticStyle:{border:"solid 1px black"},attrs:{width:"150",height:"30",align:"center"}},[this._v("维修班组")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("tr",[i("td",{staticStyle:{border:"solid 1px black"},attrs:{width:"104",height:"30",align:"center"}},[t._v("编号")]),t._v(" "),i("td",{staticStyle:{border:"solid 1px black"},attrs:{width:"104",height:"30",align:"center"}},[t._v("材料编码")]),t._v(" "),i("td",{staticStyle:{border:"solid 1px black"},attrs:{width:"200",height:"30",align:"center"}},[t._v("材料名称")]),t._v(" "),i("td",{staticStyle:{border:"solid 1px black"},attrs:{width:"104",height:"30",align:"center"}},[t._v("规格")]),t._v(" "),i("td",{staticStyle:{border:"solid 1px black"},attrs:{width:"104",height:"30",align:"center"}},[t._v("单位")]),t._v(" "),i("td",{staticStyle:{border:"solid 1px black"},attrs:{width:"104",height:"30",align:"center"}},[t._v("数量")])])}]};var c=i("VU/8")(r,o,!1,function(t){i("Nxvk")},null,null);e.default=c.exports},"9plm":function(t,e,i){(t.exports=i("FZ+f")(!1)).push([t.i,'\n.el-tag {\n  padding: 0 15px;\n}\n.print-ct {\n  display: none;\n}\n@media print {\n.el-message {\n    display: none !important;\n}\n.printitem div {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n}\n.printitem div:nth-of-type(1) span {\n      border-top: 2xp solid #ebeef5;\n}\n.printitem div:last-of-type span {\n      border-bottom: 2xp solid #ebeef5;\n}\n.printitem div span {\n      -webkit-box-flex: 1;\n          -ms-flex: 1;\n              flex: 1;\n      border: 1px solid #ebeef5;\n      font-size: 10px;\n      text-align: center;\n      word-wrap: break-word;\n      line-height: 30px;\n}\n.printitem div span:nth-of-type(1) {\n        border-left: 2xp solid #ebeef5;\n}\n.printitem div span:last-of-type {\n        border-right: 2xp solid #ebeef5;\n}\n.print-ct {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    min-height: 100%;\n    z-index: 99999;\n    display: block;\n}\n.print-ct-header {\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n      margin-bottom: 20px;\n}\n.print-ct-header div {\n        margin-top: 20px;\n        margin-right: 40px;\n        display: inline-block;\n}\n.print-ct .ul {\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n      -ms-flex-wrap: wrap;\n          flex-wrap: wrap;\n      -webkit-box-pack: justify;\n          -ms-flex-pack: justify;\n              justify-content: space-between;\n}\n.print-ct .ul .list {\n        -webkit-box-flex: 0;\n            -ms-flex: 0 0 30%;\n                flex: 0 0 30%;\n        font-size: 13px;\n        margin-bottom: 5px;\n}\n.details {\n    margin: 0;\n}\n.main-container {\n    margin-left: 0 !important;\n}\n.el-scrollbar__bar {\n    display: none !important;\n}\n.sidebar-container {\n    display: none !important;\n}\n.el-scrollbar__view {\n    display: none;\n}\n.el-menu {\n    display: none;\n}\n.noprint {\n    display: none;\n}\n}\n.model {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  position: relative;\n}\n.model:after {\n    content: "";\n    display: block;\n    width: 100%;\n    height: 100%;\n    top: 0;\n    left: 0;\n    z-index: 123;\n    position: absolute;\n}\n.model > span {\n    margin-right: 20px;\n}\n.info span {\n  line-height: 20px;\n}\n.info span:last-child {\n    color: #aaa;\n    margin-left: 10px;\n}\n.el-col {\n  margin-bottom: 20px;\n}\n.el-col.left {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n}\n.el-col.left img {\n      margin-left: 30px;\n}\n.el-col.right {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n    -webkit-box-pack: end;\n        -ms-flex-pack: end;\n            justify-content: flex-end;\n}\n.table {\n  margin-bottom: 40px;\n}\n.table-header {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n}\n.table-header div {\n      margin-left: 50px;\n}\n',""])},Nxvk:function(t,e,i){var n=i("9plm");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i("rjj0")("b541cc1c",n,!0)}});